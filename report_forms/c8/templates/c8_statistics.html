{% extends "base.html" %}
{% load i18n i10n %}
{% block header %}<div id="content_home">{% trans "C.8. Length of Stay" %}</div>
    <div id="content_helper">
        <table>
            <tr>
                <td><a href="{% url report_forms %}"><img src="{{ STATIC_URL }}/images/white.appbar.arrow.left.png" title="{% trans "Report Forms" %}" /></a></td>
                <td><a href="{% url c8_display %}"><img src="{{ STATIC_URL }}/images/white.appbar.clipboard.edit.png" title="{% trans "Form" %}" /></a></td>
                <td><a href="{% url c8_stat %}"><img src="{{ STATIC_URL }}/images/white.appbar.graph.bar.png" title="{% trans "Statistics" %}" /></a></td>
                <td><a href="{% url c8_import %}"><img src="{{ STATIC_URL }}/images/white.appbar.paperclip.png" title="{% trans "Import" %}" /></a></td>
                <td><a href="{% url c8_template %}"><img src="{{ STATIC_URL }}/images/white.appbar.page.excel.png" title="{% trans "Template" %}" /></a></td>
                <td><a href="{{ STATIC_URL }}documents/dcs/{{ LANGUAGE_CODE }}/c8.docx"><img src="{{ STATIC_URL }}/images/white.appbar.page.word.png" title="{% trans "Data collecting sheet" %}" /></a></td>
                <td><a href="{{ STATIC_URL }}documents/drt/{{ LANGUAGE_CODE }}/c8.xlsx"><img src="{{ STATIC_URL }}/images/white.appbar.page.excel.png" title="{% trans "Data reporting tables" %}" /></a></td>
                <td><a href="{{ STATIC_URL }}documents/sid/{{ LANGUAGE_CODE }}/c8.docx"><img src="{{ STATIC_URL }}/images/white.appbar.page.word.png" title="{% trans "Short indicator description" %}" /></a></td>
            </tr>
        </table>
    </div>
{% endblock header %}

{% block content %}
    {% if not_enough %}
        {% trans "Sorry, you have less than 60 cases." %}
    {% else %}
        {% trans "Overall:" %} {{ overall }}<br />
        {% trans "Excluded:" %} {{ removed }}<br />
        {% trans "Counted:" %} {{ counted }}<br />

        {% for data in diagnosis %}
            {% if data.9 >= 60 %}
                <table class="los">
                    <tr>
                        <th>{{ data.0 }}</th>
                        <th>{{ data.1 }} - {{ data.2 }}</th>
                    </tr>
                    <tr>
                        <td>{% trans "Average length of stay" %}</td>
                        <td>{{ data.3|floatformat:"2" }} {% trans "days" %}</td>
                    </tr>
                    <tr>
                        <td>{% trans "Median length of stay" %}</td>
                        <td>{{ data.4|floatformat:"2" }} {% trans "days" %}</td>
                    </tr>
                    <tr>
                        <td>{% trans "Average length of stay until the first surgical procedure" %}</td>
                        <td>{{ data.5|floatformat:"2" }} {% trans "days" %}</td>
                    </tr>
                    <tr>
                        <td>{% trans "Median length of stay until the first surgical procedure" %}</td>
                        <td>{{ data.6|floatformat:"2" }} {% trans "days" %}</td>
                    </tr>
                    <tr>
                        <td>{% trans "Average length of stay from the first surgical procedure until discharge" %}</td>
                        <td>{{ data.7|floatformat:"2" }} {% trans "days" %}</td>
                    </tr>
                    <tr>
                        <td>{% trans "Median length of stay from the first surgical procedure until discharge" %}</td>
                        <td>{{ data.8|floatformat:"2" }} {% trans "days" %}</td>
                    </tr>
                </table>
            {% endif %}
        {% endfor %}
    {% endif %}
{% endblock content %}

{% block js %}
    <script src="{{ STATIC_URL }}js/jquery.jqplot.min.js"></script>
    <script src="{{ STATIC_URL }}js/plugins/jqplot.barRenderer.min.js"></script>
    <script src="{{ STATIC_URL }}js/plugins/jqplot.canvasTextRenderer.min.js"></script>
    <script src="{{ STATIC_URL }}js/plugins/jqplot.canvasAxisTickRenderer.min.js"></script>
    <script src="{{ STATIC_URL }}js/plugins/jqplot.categoryAxisRenderer.min.js"></script>
    <script src="{{ STATIC_URL }}js/plugins/jqplot.highlighter.min.js"></script>

    <script type="text/javascript">
        $(document).ready(function(){
            {% localize off %}
                var first = [['{% trans "Appropriate antibiotic drug" %}', {{ one }}],
                    ['{% trans "Appropriate dose" %}', {{ twoa }}],
                    ['{% trans "Appropriate dose with weight" %}', {{ twob }}],
                    ['{% trans "Appropriate route of administration: intravenous administration" %}', {{ three }}],
                    ['{% trans "Appropriate timing, within one hour of surgical wound incision" %}', {{ four }}],
                    ['{% trans "Appropriate timing:" %}', {{ five }}],
                    ['{% trans "Full compliance with criteria 1-5" %}', {{ ten }}],
                    ['{% trans "% of misuse" %}', {{ six }}],
                    ['{% trans "% of overuse" %}', {{ seven }}],
                    ['{% trans "% of underuse" %}', {{ eight }}],
                    ['{% trans "% of single shot treatment" %}', {{ nine }}]];
            {% endlocalize %}
            $.jqplot('graph1', [first], {
                seriesDefaults: {renderer: $.jqplot.BarRenderer},
                axes: {
                    xaxis:{
                        renderer:$.jqplot.CategoryAxisRenderer,
                        tickRenderer: $.jqplot.CanvasAxisTickRenderer ,
                        tickOptions: {
                            angle: -30,
                            labelPosition: 'end',
                            fontSize: 8
                        }
                    },
                    yaxis:{
                        tickOptions: {
                            formatString: '%.2f'
                        },
                        min: 0,
                        max: 100}
                },
                highlighter: {
                    show: true,
                    tooltipAxes: 'y',
                    formatString: '%.2f%'
                }
            });
        });
    </script>
{% endblock js %}